<style>
span {
  margin-right: 10px;
}
.p0, .p1 {
  display: none;
}
</style>

<span class='x p2'>xx</span><span class='x p1'>x</span>

<script>
$ = s => document.querySelector(s);
n = 40;
n = 4_000_000;
while(true) {
  prev = $('.x:not(:first-child)');
  curr = $('.x');
  next = document.createElement('span');
  next.classList.add('x', 'p'+(+Array.from(curr.classList).filter(x=>x!=='x').map(x => x[1])+1)%3);
  next.innerText = curr.innerText + prev.innerText;
  if (next.innerText.length > n) break;
  document.body.prepend(next);
}
console.log(document.body.innerText.length);
</script>
